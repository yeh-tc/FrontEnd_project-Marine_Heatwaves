<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <title>Marine Heatwaves</title>
        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
        <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,0" />

        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">
        <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />

        <style>
            * {
                box-sizing: border-box;
            }

            html {
                scroll-behavior: smooth;
            }

            body {
                margin: 0;
                font-family: "Poppins", 'Noto Sans TC', sans-serif;
                background: #2a282d;
                color: #222;
                -webkit-text-size-adjust: 100%;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            }

            p {
                color: #565656;
                line-height: 1.8;
            }

            h2 {
                line-height: 1.2;
                text-align: center;
                margin: 0;
                padding: 0;
                font-weight: 900;
                color: rgb(246, 91, 60);
                font-family: "Poppins", 'Noto Sans TC', sans-serif;
                font-size: 26px;
                margin-bottom: 10px;
            }

           
            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                appearance: none !important;
                -moz-appearance: none !important;
                -webkit-appearance: none !important;
                -o-appearance: none !important;
                -ms-appearance: none !important;
                margin: 0;
            }

            input:focus,
            select:focus:focus {
                outline: none;
                box-shadow: none !important;
                -moz-box-shadow: none !important;
                -webkit-box-shadow: none !important;
                -o-box-shadow: none !important;
                -ms-box-shadow: none !important;
            }

            nav {
                position: fixed;
                top: 0;
                left: 0;
                display: flex;
                display: -webkit-flex;
                align-items: center;
                padding: 0 20px;
                width: 100%;
                height: 72px;
                background: #ffffff;
                box-shadow: 0 0 10px rgb(0 0 0 / 10%);
                justify-content: space-between;
                -moz-justify-content: space-between;
                -webkit-justify-content: space-between;
                -o-justify-content: space-between;
                -ms-justify-content: space-between;
                z-index: 900;
            }

            nav img {
                width: 28px;
                height: 28px;
                transform-origin: 0% 50%;
                margin-top: 5px;
            }

            nav a {
                color: #565656;
                text-decoration: none;
                transition: 0.3s;
                font-size: 16px;
                font-weight: 600;
            }


            nav a.active {
                color: rgb(246, 91, 60);
            }

            .nav-textlink {
                display: inline-flex;
                gap: 16px;
            }

            .nav-left {
                display: inline-flex;
                align-items: center;
                gap: 12px;
            }

            .burger {
                position: fixed;
                z-index: 3;
                top: 0;
                right: 0;
                display: grid;
                place-items: center;
                padding: 0;
                width: 82px;
                height: 82px;
                font-size: 30px;
                color: #565656;
                background: transparent;
                border: 0;
                cursor: pointer;
                display: none;
            }

            .burger span:last-child {
                display: none;
            }

            body.open .burger span:first-child {
                display: none;
            }

            body.open .burger span:last-child {
                display: block;
            }

            aside {
                position: fixed;
                z-index: 2;
                top: 0;
                right: 0;
                display: none;
                flex-direction: column;
                width: 260px;
                height: 100%;
                padding: 18px 20px 20px;
                background: #ffffff;
                box-shadow: 0 0 20px rgb(0 0 0 / 20%);
                box-shadow: 0 0 6px rgba(131, 43, 26, 0.12);
                -moz-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                -webkit-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                -o-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                -ms-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                translate: 100% 0;
                transition: 0.3s;
            }

            body.open aside {
                translate: 0;
            }

            aside a {
                display: flex;
                align-items: center;
                height: 50px;
            }

            .switch-in-aside {
                margin-top: 5px;
            }
           
            .nav-right {
                margin-top: 5px;
            }

            .aside-switch {
                padding-top: 20px;
            }

            .switch {
                position: relative;
                display: inline-block;
            }

            .switch>span {
                position: absolute;
                top: 8px;
                pointer-events: none;
                font-family: 'Noto Sans TC', sans-serif;
                font-weight: bold;
                font-size: 12px;
                text-transform: uppercase;
                text-shadow: 0 1px 0 rgba(0, 0, 0, .06);
                width: 50%;
                text-align: center;
            }

            input.check-toggle-round-flat:checked~.off {
                color: rgb(246, 91, 60);
            }

            input.check-toggle-round-flat:checked~.on {
                color: #fff;
            }

            .switch>span.on {
                left: 0;
                padding-left: 6px;
                color: rgb(246, 91, 60);
            }

            .switch>span.off {
                right: 0;
                color: #fff;
            }

            .check-toggle {
                position: absolute;
                margin-left: -9999px;
                visibility: hidden;
            }

            .check-toggle+label {
                display: block;
                position: relative;
                cursor: pointer;
                outline: none;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }

            input.check-toggle-round-flat+label {
                padding: 2px;
                width: 97px;
                height: 35px;
                background-color: #565656;
                border-radius: 60px;
                -moz-border-radius: 60px;
                -webkit-border-radius: 60px;
                -o-border-radius: 60px;
                -ms-border-radius: 60px;
            }

            input.check-toggle-round-flat+label:before,
            input.check-toggle-round-flat+label:after {
                display: block;
                position: absolute;
                content: "";
            }

            input.check-toggle-round-flat+label:before {
                top: 2px;
                left: 2px;
                bottom: 2px;
                right: 2px;
                background-color: #565656;;
                border-radius: 60px;
                -moz-border-radius: 60px;
                -webkit-border-radius: 60px;
                -o-border-radius: 60px;
                -ms-border-radius: 60px;
            }

            input.check-toggle-round-flat+label:after {
                top: 4px;
                left: 4px;
                bottom: 4px;
                width: 48px;
                background-color: #fff;
                border-radius: 52px;
                -moz-border-radius: 52px;
                -webkit-border-radius: 52px;
                -o-border-radius: 52px;
                -ms-border-radius: 52px;
                transition: margin 0.2s;
            }


            input.check-toggle-round-flat:checked+label:after {
                margin-left: 44px;
                width: 44px;
            }

            section {
                display: flex;
                display: -webkit-flex;
                align-items: center;
                justify-content: center;
                -moz-justify-content: center;
                -webkit-justify-content: center;
                -o-justify-content: center;
                -ms-justify-content: center;
                min-height: 100vh;
                padding: 100px 5%;
                text-align: left;
            }

            .content {
                position: relative;
                z-index: 1;
                padding: 0 30px;

            }

            .container {
                max-width: 1400px;
            }

            #home {
                position: relative;
                overflow: hidden;
                background: #ffffff;
            }

            #home h1 {
                color: rgb(246, 91, 60);
                font-size: 2rem;
                text-align: center;
            }

            #home .title {
                padding: 0 30px;
                max-width: 800px;
                text-align: justify;
                text-justify: inter-word;
            }

            #about {
                background: #ffffff;
            }

            #about .content {
                text-align: justify;
                text-justify: inter-word;
            }

            #about p {
                padding-top: 20px;
            }

            #about a:link {
                color: rgb(118, 25, 28);
                background-color: transparent;
                text-decoration: none;
            }

            #about a:visited {
                color: rgb(118, 25, 28);
                background-color: transparent;
                text-decoration: none;
            }


            #about .img_responsive {
                width: 100%;
                max-width: 600px;
                height: auto;
                display: block;
                margin-left: auto;
                margin-right: auto;
                padding-top: 2rem;
            }

            #about .img_caption {
                color: #565656;
                font-size: 0.85rem;
                display: block;
                max-width: 600px;
                margin-left: auto;
                margin-right: auto;
            }

            #method {
                background: #fffaf8;
            }

            #method .content h3 {
                color: #565656;
                font-size: 1.5rem;
                text-align: center;
            }

            .cardwrapper {
                padding: 20px 0px;
            }

            .card-row {
                display: flex;
                display: -webkit-flex;
                gap: 15px
            }

            .card {
                background: #fff;
                width: 100%;
                border-radius: 10px;
                -moz-border-radius: 10px;
                -webkit-border-radius: 10px;
                -o-border-radius: 10px;
                -ms-border-radius: 10px;
                margin-top: 30px;
                padding: 1.25rem 1.5rem;
                box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                -moz-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                -webkit-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                -o-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
                -ms-box-shadow: 0 2px 6px rgba(131, 43, 26, 0.12);
            }

            #method .card h3 {
                text-align: start;
                font-size: 1.25rem;
            }

            .underline {
                background-image: linear-gradient(120deg, #F79683 0%, #FFBE4B 100%);
                background-repeat: no-repeat;
                background-size: 100% 0.2em;
                background-position: 0 88%;
            }

            #method a:link {
                color: rgb(118, 25, 28);
                background-color: transparent;
                text-decoration: none;
            }

            #method a:visited {
                color: #76191c;
                background-color: transparent;
                text-decoration: none;
            }

            .title-wrapper {
                display: flex;
                display: -webkit-flex;
                justify-content: space-between;
                -moz-justify-content: space-between;
                -webkit-justify-content: space-between;
                -o-justify-content: space-between;
                -ms-justify-content: space-between;

            }

            .title-wrapper>button:nth-child(2) {
                border: 0;
                cursor: pointer;
                color: #565656;
                width: 30px;
                background: transparent;
            }

            .rf {
                overflow: hidden;
                max-height: 0;
            }

            .rf_list li {
                text-indent: -2em;
            }

            .active_rf {
                max-height: 100%;
                color: #565656;
                line-height: 1.8;
                font-family: "Poppins", 'Noto Sans TC', sans-serif;
            }


            #download {
                background: #2a282d;
            }

            #download h2 {
                color: rgb(246, 91, 60);
            }

            svg {
                position: absolute;
                top: 78px;
                left: 0;
                width: 100%;
                height: calc(100% - 78px);
                box-sizing: border-box;
                display: block;
                background-color: #ffffff;
                z-index: 0;
            }

            #download .query-form {
                color: rgb(255 255 255 / 84%);
                font-family: "Poppins", 'Noto Sans TC', sans-serif;
            }

            #download .formwrapper {
                padding: 50px 0px;
            }

            #download .form-row {
                margin: 0 -30px;
                display: flex;
                display: -webkit-flex;
                
            }
            
            #download .form-row .form-group {
                width: 100%;
                padding: 0 30px;
                flex-grow: 1;
            }

            #download .form-input{
                flex: 1; 
                margin-bottom: 23px;
            }

            #download label,
            input {
                display: block;
                width: 100%;
            }

            #download label {
                margin-bottom: 7px;
            }

            #download label.required {
                position: relative;
            }

            #download label.required:after {
                content: '*';
                margin-left: 2px;
                color: rgb(246, 91, 60);
            }

            #download input {
                box-sizing: border-box;
                border: 1px solid rgb(255 255 255 / 84%);
                padding: 14px 20px;
                border-radius: 5px;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                -o-border-radius: 5px;
                -ms-border-radius: 5px;
                font-size: 14px;
                background-color: #2a282d;
                color: rgb(255 255 255 / 84%);
            }

            #download input:focus {
                outline: none;
                border: 1px solid rgb(246, 91, 60);
            }

            ::-webkit-calendar-picker-indicator {
                filter: invert(1);
            }

            /* Firefox */
            input[type=number] {
                -moz-appearance: textfield;
            }

            #download .select-list {
                width: 100%;
                margin-bottom: 53px;
            }

            #download p {
                color: rgb(255 255 255 / 94%);
                font-weight: 300;
            }

            #download .material-checkbox {
                display: flex;
                display: -webkit-flex;
                align-items: center;
                font-size: 16px;
                color: rgb(255 255 255 / 84%);
                cursor: pointer;

            }

            #download .material-checkbox input[type="checkbox"] {
                position: absolute;
                opacity: 0;
                width: 0;
                height: 0;
            }

            #download .checkmark {
                position: relative;
                display: inline-block;
                width: 20px;
                height: 20px;
                margin-right: 12px;
                border: 1px solid rgb(255 255 255 / 84%);
                border-radius: 5px;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                -o-border-radius: 5px;
                -ms-border-radius: 5px;
                transition: all 0.3s;
            }

            #download .material-checkbox input[type="checkbox"]:checked~.checkmark {
                border-color: rgb(246, 91, 60);
            }

            #download .material-checkbox input[type="checkbox"]:checked~.checkmark:after {
                content: "";
                position: absolute;
                top: 2px;
                left: 6px;
                width: 4px;
                height: 10px;
                border: solid rgb(255 255 255 / 84%);
                border-width: 0 2px 2px 0;
                transform: rotate(45deg);
            }

            #download .material-checkbox:hover input[type="checkbox"]~.checkmark {
                border-color: rgb(246, 91, 60);
            }

            #download .material-checkbox input[type="checkbox"]:disabled~.checkmark {
                opacity: 0.5;
                cursor: not-allowed;
            }

            #download .material-checkbox input[type="checkbox"]:disabled~.checkmark:hover {
                border-color: #4d4d4d;
            }

            #download .note {
                width: 100%;
                margin-bottom: 43px;

            }

            #download .note li {
                color: rgb(255 255 255 / 84%);
                line-height: 2rem;
            }

            #download .query {
                text-align: right;

            }

            #downloadbtn {
                width: 150px;
                height: 50px;
                display: inline-block;
                font-family: 'Poppins';
                font-weight: bold;
                font-size: 14px;
                padding: 10px;
                border: none;
                cursor: pointer;
                text-transform: uppercase;
                border-radius: 5px;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                -o-border-radius: 5px;
                -ms-border-radius: 5px;
                background: transparent;
                color: #f65b3c;
                border: 1px solid rgba(255, 255, 255, 0.84);
            }

            #downloadbtn:hover {
                border: 1px solid rgb(246, 91, 60);
            }
            .error-message {
                color: #f65b3c;
                font-size: 0.9em;
                min-height: 20px;
                display: block;
                visibility: hidden;
            }
            #footer {
                background: #2a282d;
                color: rgba(255, 255, 255, 0.84);
                font-size: 14px;
            }

            .footer-top {
                background: #252328;
                border-bottom: 1px solid #383838;
                padding: 40px 5%;
                display: flex;
                display: -webkit-flex;
                justify-content: center;
                -moz-justify-content: center;
                -webkit-justify-content: center;
                -o-justify-content: center;
                -ms-justify-content: center;
            }

            .footer-container {
                max-width: 1400px;
                width: 100%;
                padding: 0px 30px;
            }

            .footer-info h3 {
                font-size: 22px;
                margin: 0 0 20px 0;
                padding: 2px 0 2px 0;
                line-height: 1;
                font-weight: 400;
                text-transform: uppercase;
            }

            .footer-info h3 span {
                color: rgb(246, 91, 60);
                font-size: 20px;
            }

            .footer-info p {
                font-size: 14px;
                line-height: 24px;
                margin-bottom: 0;
                font-family: 'Poppins', 'Noto Sans TC', sans-serif;
                color: rgba(255, 255, 255, 0.84);
                letter-spacing: 0.5px;
            }

            .copywright {
                text-align: center;
                margin-top: 20px;
                margin-bottom: 20px;
            }

            .copywright p {
                color: rgba(255, 255, 255, 0.84);
            }


            @media screen and (max-width: 1024px) {
                .container {
                    width: calc(100% - 30px);
                    max-width: 100%;
                    margin: 0 auto;
                }

                .footer-container {
                    width: calc(100% - 30px);
                    max-width: 100%;
                    margin: 0 auto;
                }

                .query-form {
                    width: 100%;
                }
            }

            @media screen and (max-width: 992px) {
                #download .form-row {
                    flex-direction: column;
                    -moz-flex-direction: column;
                    -webkit-flex-direction: column;
                    -o-flex-direction: column;
                    -ms-flex-direction: column;
                    margin: 0px;
                    justify-content: center;
                    -moz-justify-content: center;
                    -webkit-justify-content: center;
                    -o-justify-content: center;
                    -ms-justify-content: center;
                }

                #download .form-row .form-group {
                    width: 100%;
                    padding: 0px 0px;
                }
            }

            @media screen and (max-width: 768px) {

                #home .title {
                    padding: 0 0px;
                }

                .footer-container {
                    padding: 20px 0px;
                }

                .content {
                    padding: 20px 0px;
                }

                #method .card-row {
                    flex-direction: column;
                    -moz-flex-direction: column;
                    -webkit-flex-direction: column;
                    -o-flex-direction: column;
                    -ms-flex-direction: column;
                    margin: 0px;
                    justify-content: center;
                    -moz-justify-content: center;
                    -webkit-justify-content: center;
                    -o-justify-content: center;
                    -ms-justify-content: center;
                }
            }

            @media screen and (max-width: 480px) {
                #download .query {
                    width: 100%;
                }

                #downloadbtn {
                    margin-bottom: 20px;
                    margin-right: 0px;
                }

                .section {
                    padding:85px 5px;
                }

                .footer-top {
                    padding: 20px 5px;
                }

                .burger {
                    display: block;
                }

                .nav-textlink {
                    display: none;
                }

                .nav-right {
                    display: none;
                }

                aside {
                    display: flex;
                }
            }

        </style>

    </head>

    <body>
        <nav id="nav" class="navbar">
            <div class="nav-left">
                <span><img src="./assets/LOGO.svg" />
                </span>
                <div class="nav-textlink">
                    <a data-scroll="home" href="#home" class="active">Home</a>
                    <a data-scroll="about" href="#about">About</a>
                    <a data-scroll="method" href="#method">Method</a>
                    <a data-scroll="download" href="#download">Download</a>
                </div>
            </div>
            <div class="nav-right">
                <div class="switch">
                    <input id="language-toggle" class="check-toggle check-toggle-round-flat" type="checkbox">
                    <label for="language-toggle"></label>
                    <span class="on">中文</span>
                    <span class="off">EN</span>
                </div>
            </div>

            <button class="burger" onclick="toggleMenu()">
                <span class="material-symbols-outlined">
                    menu
                </span>
                <span class="material-symbols-outlined">
                    close
                </span>
            </button>
            <aside>
                <a data-scroll="home" href="#home" class="active">Home</a>
                <a data-scroll="about" href="#about">About</a>
                <a data-scroll="method" href="#method">Method</a>
                <a data-scroll="download" href="#download">Download</a>

                <div class="aside-switch">
                    <div class="switch">
                        <input id="language-toggle-aside" class="check-toggle check-toggle-round-flat" type="checkbox">
                        <label for="language-toggle-aside"></label>
                        <span class="on">中文</span>
                        <span class="off">EN</span>
                    </div>
                </div>
            </aside>
        </nav>
        <section id="home" class="section">
            <div class="container">
                <div class="content-wrapper text-center">
                    <div class="content">
                        <h1>Marine Heatwaves</h1>
                        <div class="title">
                            <p data-lang="home_subtitle">
                                ODB 提供全球 0.25° x 0.25° 每月的海表平均溫度、海表溫度異常值、海洋熱浪級數與海洋熱浪引起的熱位移 (Thermal displacement)
                                之資料下載。
                            </p>
                        </div>
                    </div>
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        x="0px" y="0px" width="100%" height="100%" viewBox="0 0 1600 900"
                        preserveAspectRatio="xMidYMax slice">
                        <defs>
                            <linearGradient id="bg">
                                <stop offset="0%" style="stop-color:rgba(249, 158, 130, 0.059)"></stop>
                                <stop offset="60%" style="stop-color:rgba(255, 190, 75, 0.6)"></stop>
                                <stop offset="100%" style="stop-color:rgba(189, 209, 72, 0.1)"></stop>
                            </linearGradient>
                            <path id="wave" fill="url(#bg)" d="M-363.852,502.589c0,0,236.988-41.997,505.475,0
	s371.981,38.998,575.971,0s293.985-39.278,505.474,5.859s493.475,48.368,716.963-4.995v560.106H-363.852V502.589z" />
                        </defs>
                        <g>
                            <use xlink:href='#wave' opacity=".3">
                                <animateTransform attributeName="transform" attributeType="XML" type="translate"
                                    dur="10s" calcMode="spline" values="270 230; -334 180; 270 230" keyTimes="0; .5; 1"
                                    keySplines="0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0" repeatCount="indefinite" />
                            </use>
                            <use xlink:href='#wave' opacity=".6">
                                <animateTransform attributeName="transform" attributeType="XML" type="translate"
                                    dur="8s" calcMode="spline" values="-270 230;243 220;-270 230" keyTimes="0; .6; 1"
                                    keySplines="0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0" repeatCount="indefinite" />
                            </use>
                            <use xlink:href='#wave' opacty=".9">
                                <animateTransform attributeName="transform" attributeType="XML" type="translate"
                                    dur="6s" calcMode="spline" values="0 230;-140 200;0 230" keyTimes="0; .4; 1"
                                    keySplines="0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0" repeatCount="indefinite" />
                            </use>
                        </g>
                    </svg>
                </div>
            </div>

        </section>
        <section id="about" class="section">
            <div class="container">
                <div class="content-wrapper text-center">
                    <div class="content">
                        <h2>About</h2>
                        <p data-lang="about_text">
                            全球暖化造成的氣候危機導致地球持續升溫，陸地上的異常高溫熱浪帶來致命的威脅，而海洋也面臨相同狀況。在同一地點，
                            若海水溫度相對與過去平均海洋溫度出現一段時間的異常高溫，這種現象被稱為海洋熱浪 (marine heatwaves, MHWs)
                            (<a href="https://www.fish.wa.gov.au/documents/research_reports/frr222.pdf">Pearce et al.,
                                2011</a>; <a
                                href="https://www.sciencedirect.com/science/article/pii/S0079661116000057">Hobday et
                                al., 2016</a>)。
                            海洋熱浪的範圍可以延伸至數千平方公里，持續數周甚至數月 (<a href="https://www.nature.com/articles/nclimate3082">Di
                                Lorenzo and Mantua, 2016</a>)，而這種長時間異常高溫的環境對於海洋生物、海洋生態系統和漁業資源都造成極大的影響。
                            為了提升民眾對海洋熱浪的認識， ODB 使用 <a
                                href="https://www.ncei.noaa.gov/products/optimum-interpolation-sst">NOAA
                                OISST</a>（Optimum Interpolation Sea
                            Surface Temperature 海表溫度）0.25° x 0.25° 的資料，
                            並依 <a href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et
                                al. (2020)</a> 的方法，計算了全球 1982 年至今約 40 年間每個月的海洋熱浪事件（詳見 Method），
                            同時，我們依據 <a
                                href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday
                                et al. (2018)</a> 的分級標準，將海洋熱浪分級，
                            建立了一個全球海洋熱浪資料庫。此資料庫內容包含：每月的海表平均溫度、海表溫度異常值、海洋熱浪級數與海洋熱浪引起的熱位移*。
                            該資料將每月進行更新，並開放資料下載。同時，我們也開放 <a
                                href="https://ecodata.odb.ntu.edu.tw/geoserver/marineheatwave/wms?service=WMS&request=GetCapabilities">WMS</a>
                            與 <a
                                href="https://ecodata.odb.ntu.edu.tw/geoserver/gwc/service/wmts/?service=WMTS&request=getCapabilities">WMTS</a>
                            圖層（介接網址如超連結），
                            歡迎各界介接（若使用 QGIS 介接，可參考<a href="https://ecodata.odb.ntu.edu.tw/geoserver/
                            marineheatwave/wms">此網頁</a>）。<br /><br />

                            根據 <a href="https://doi.org/10.1017/9781009325844">2022 年的《政府間氣候變化專門委員會》(IPCC)
                                報告</a>，未來全球海洋熱浪事件不僅頻率將增加，強度與持續時間也將上升。
                            面對愈來愈頻繁發生的海洋熱浪 (<a href="https://www.nature.com/articles/s41586-018-0383-9">Frölicher et al.
                                2018</a>; <a href="https://www.nature.com/articles/s41467-018-03732-9">Oliver et al.,
                                2018</a>) ，
                            ODB
                            希望透過建立海洋熱浪資料庫提升使用者對海洋熱浪的認知與意識，進一步協助學界研究海洋熱浪時空分布和變化趨勢以及對海洋生物的可能影響，同時也為預測和應對海洋熱浪提供科學數據參考。<br /><br />

                            * Thermal Displacement: 熱位移就是在海洋熱浪的影響下，為了追隨長期平均海表溫度所需移動的最小距離 (<a
                                href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et al., 2020</a>)。
                            熱位移在本篇文獻中特指海洋熱浪對周圍海洋生態系統的影響範圍，特別是對海洋生物遷移、分布範圍和生態系統功能的影響。
                        </p>
                        <div class="figwrapper">
                            <img src="./assets/hobday_2018.jpg" alt="" style="vertical-align:middle"
                                class="img_responsive" /><br>
                            <div class="img_caption" data-lang="fig1_text">海洋熱浪分級標準，依據 <a
                                    href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday
                                    et al., 2018</a> 分級方法，每月 SST 異常值超過門檻值 2 倍以下、2 倍至 3
                                倍之間、3 倍至 4 倍之間、4倍以上，
                                其分級為 Moderate、Strong、Severe、Extreme，共四級。圖修改自 <a
                                    href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday
                                    et al. (2018)。</a></div>
                        </div>
                        <div class="figwrapper">
                            <img src="./assets/202306.png" alt="" style="vertical-align:middle"
                                class="img_responsive" /><br>
                            <div class="img_caption" data-lang="fig2_text">本資料庫 2023 年六月全球 (a) 海洋熱浪分級、(b) 海洋熱浪引起的熱位移。
                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </section>

        <section id="method" class="section">
            <div class="container">
                <div class="content-wrapper text-center">
                    <div class="content">
                        <h2>Method</h2>
                        <h3 data-lang="method_title">ODB 海洋熱浪計算方法與定義</h3>

                        <div class="cardwrapper">
                            <div class="card-row">
                                <div class="card">
                                    <h3><span class="underline">Step A</span></h3>
                                    <div class="underline"></div>
                                    <p data-lang="step_a">使用 NOAA OISST 0.25° x 0.25° 的 v2.1 資料集，計算 1982 至今每月平均 SST。
                                    </p>
                                </div>
                                <div class="card">
                                    <h3><span class="underline">Step B</span></h3>
                                    <p data-lang="step_b">計算每月 SST 異常值：<br />
                                        每月平均 SST (Step A) - 各月 SST 長期平均值 (1982-2011)。</p>
                                </div>
                                <div class="card">
                                    <h3><span class="underline">Step C</span></h3>
                                    <p data-lang="step_c">將計算出的異常值，根據 Step C-1 的方法定義海洋熱浪門檻值。</p>
                                </div>
                            </div>
                            <div class="card-row">
                                <div class="card">
                                    <h3><span class="underline">Step C-1</span></h3>
                                    <p data-lang="step_c_1">每月 SST 異常值（算法如 Step B）至少高於季節背景值*的第 90 個百分位數。<br />
                                        *季節背景值：將計算月份的前後一個月納入當作背景值，例如定義 2 月份海洋熱浪的門檻值，即為綜合過去 1、2、3 月全部每月 SST 異常值的第 90
                                        個百分位數。(<a href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et al.,
                                            2020</a>)</p>
                                </div>
                                <div class="card">
                                    <h3><span class="underline">Step D</span></h3>
                                    <p data-lang="step_d">比較 Step B 與 Step C 即得知海洋熱浪發生與否及 SST 異常值。<br />
                                        若有熱浪，找出海洋熱浪引起的熱位移。</p>
                                </div>
                            </div>
                            <div class="card">
                                <h3><span class="underline">GitHub</span></h3>
                                <p>Jacox et al., 2020: <a
                                        href="https://github.com/mjacox/Thermal_Displacement/">https://github.com/mjacox/Thermal_Displacement</a>
                                    (in Matlab)</p>
                                <p>ODB: <a
                                        href="https://github.com/yeh-tc/Python_project-Thermal_Displacement">https://github.com/yeh-tc/Python_project-Thermal_Displacement</a>
                                    (in Python)</p>
                            </div>
                            <div class="card">
                                <div>
                                    <div class="title-wrapper">
                                        <h3><span class="underline">Reference List</span></h3>
                                        <button onclick="toggleDropdown()">
                                            <span id="chevron" class="chevron material-symbols-outlined">
                                                expand_more
                                            </span>
                                        </button>
                                    </div>
                                    <div id="rf" class="rf">
                                        <p class="rf_list">
                                        <ul>
                                            <li>Di Lorenzo, E., &Mantua, N. (2016). Multi-year persistence of the
                                                2014/15 North Pacific marine heatwave. Nature Climate Change , 6(11),
                                                1042–1047. <a href="http://dx.doi.org/10.1038/nclimate3082">doi:
                                                    10.1038/nclimate3082</a></li>
                                            <li>Frölicher, T. L., Fischer, E. M., &Gruber, N. (2018). Marine heatwaves
                                                under global warming. Nature, 560(7718), 360–364. <a
                                                    href="https://doi.org/10.1038/s41586-018-0383-9">doi:
                                                    10.1038/s41586-018-0383-9</a></li>
                                            <li>Hobday, A. J., Alexander, L.V., Perkins, S. E., Smale, D. A., Straub, S.
                                                C., Oliver, E. C. J., Benthuysen, J. A., Burrows, M. T., Donat, M. G.,
                                                Feng, M., Holbrook, N. J., Moore, P. J., Scannell, H. A., SenGupta, A.,
                                                &Wernberg, T. (2016). A hierarchical approach to defining marine
                                                heatwaves. Progress in Oceanography, 141, 227–238. <a
                                                    href="https://doi.org/10.1016/j.pocean.2015.12.014">doi:
                                                    10.1016/j.pocean.2015.12.014</a></li>
                                            <li>Hobday, A. J., Oliver, E. C. J., Gupta, A.Sen, Benthuysen, J. A.,
                                                Burrows, M. T., Donat, M. G., Holbrook, N. J., Moore, P. J., Thomsen, M.
                                                S., Wernberg, T., &Smale, D. A. (2018). Categorizing and naming marine
                                                heatwaves. Oceanography, 31(2), 162–173. <a
                                                    href="https://doi.org/10.5670/oceanog.2018.205">doi:
                                                    10.5670/oceanog.2018.205</a></li>
                                            <li>Huang, B., C. Liu, V. Banzon, E. Freeman, G. Graham, B. Hankins, T.
                                                Smith, and H.-M. Zhang,
                                                2020: Improvements of the Daily Optimum Interpolation Sea Surface
                                                Temperature (DOISST) Version 2.1,
                                                Journal of Climate, 34, 2923-2939. <a
                                                    href="https://doi.org/10.1175/JCLI-D-20-0166.1">doi:
                                                    10.1175/JCLI-D-20-0166.1</a></li>
                                            <li>IPCC, 2022: Climate Change 2022: Impacts, Adaptation and Vulnerability.
                                                Contribution of Working Group II to the Sixth Assessment Report of the
                                                Intergovernmental Panel on Climate Change [H.-O. Pörtner, D.C. Roberts,
                                                M. Tignor, E.S. Poloczanska, K. Mintenbeck, A. Alegría, M. Craig, S.
                                                Langsdorf, S. Löschke, V. Möller, A. Okem, B. Rama (eds.)]. Cambridge
                                                University Press. Cambridge University Press, Cambridge, UK and New
                                                York, NY, USA, 3056 pp. <a
                                                    href="https://doi.org/10.1017/9781009325844">doi:10.1017/9781009325844</a>
                                            </li>
                                            <li>Jacox, M., Alexander, M., Bograd, S., &Scott, J. (2020). Thermal
                                                displacement by marine heatwaves. Nature., 584, 82-86. <a
                                                    href="https://doi.org/10.1038/s41586-020-2534-z">doi:
                                                    10.1038/s41586-020-2534-z</a></li>
                                            <li>Oliver, E. C. J., Donat, M. G., Burrows, M. T., Moore, P. J., Smale, D.
                                                A., Alexander, L.V., Benthuysen, J. A., Feng, M., SenGupta, A., Hobday,
                                                A. J., Holbrook, N. J., Perkins-Kirkpatrick, S. E., Scannell, H. A.,
                                                Straub, S. C., &Wernberg, T. (2018). Longer and more frequent marine
                                                heatwaves over the past century. Nature Communications, 9(1), 1–12. <a
                                                    href="https://doi.org/10.1038/s41467-018-03732-9">doi:
                                                    10.1038/s41467-018-03732-9</a></li>
                                            <li>Pearce, A., Lenanton, R., Jackson, G., Moore, J., Feng, M., &Gaughan, D.
                                                (2011). The “marine heat wave” off Western Australia during the summer
                                                of 2010/11. Fisheries Research Report No. 222. Department of Fisheries,
                                                Western Australia. 40pp.</li>
                                        </ul>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
        <section id="download" class="section">
            <div class="container">
                <div class="content-wrapper text-center">
                    <div class="content">
                        <h2>Download</h2>


                        <div class="query-form">
                            <div class="formwrapper">
                                <div class="note">
                                    <p data-lang="download_note">注意事項</p>
                                    <ul>
                                        <li data-lang="download1">下載之檔案為 .csv</li>
                                        <li data-lang="download2">經度範圍：-180&deg; ~ 180&deg;，緯度範圍：-90&deg; ~
                                            90&deg;，時間範圍：1982-Jan-01 ~ 上個月。
                                        </li>
                                        <li data-lang="download3">資料輸出欄位：lon（經度）、lat（緯度）、date（日期，yyyy-mm-dd，ex.
                                            2023-06-01 等同 2023 六月份資料）、
                                            sst（每月海表平均溫度，&deg;C）、sst_anomaly（每月海表溫度異常值，&deg;C）、level（每月海洋熱浪級數）、td（每月熱位移，km）。
                                        </li>
                                        <li data-lang="download4">下載單點資料，無時間限制，請輸入起始經度、起始緯度和時間區段。</li>
                                        <li data-lang="download5">下載區域資料，若區域範圍 &le; 90&deg; x
                                            90&deg;，時間區段最長只能一年，請輸入經度、緯度範圍和時間區段。</li>
                                        <li data-lang="download6">下載區域資料，若區域範圍 &gt; 90&deg; x
                                            90&deg;，時間區段最長只能一個月，請輸入經度、緯度範圍和時間區段。</li>
                                        <li data-lang="download7">若您使用 ODB 提供的資料，引用格式如: Ocean Data Bank, National
                                            Science and Technology
                                            Council,
                                            Taiwan. https://doi.org/10.5281/zenodo.7512112. Accessed DAY/MONTH/YEAR from
                                            www.odb.ntu.edu.tw.</li>
                                    </ul>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <div class="form-input">
                                            <label for="startDate" data-lang="start_time">開始時間</label>
                                            <input type="date" id="startDate">
                                            <div class="error-message">。</div>
                                        </div>
                                        <div class="form-input">
                                            <label for="endDate" data-lang="end_time">結束時間</label>
                                            <input type="date" id="endDate">
                                            <div class="error-message">。</div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-input">
                                            <label for="lon0" class="required" data-lang="start_lon">起始經度</label>
                                            <input type="number" id="lon0" min="-180" max="180" required>
                                            <div class="error-message" data-for="lon0" data-lang="lon0">須為介於 -180 到 180 的數字。</div>
                                        </div>
                                        <div class="form-input">
                                            <label for="lon1" data-lang="end_lon">結束經度</label>
                                            <input type="number" id="lon1" min="-180" max="180">
                                            <div class="error-message" data-for="lon1" data-lang="lon1">須介於 -180 到 180 的數字，或空白。</div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-input">
                                            <label for="lat0" class="required" data-lang="start_lat">起始緯度</label>
                                            <input type="number" id="lat0" min="-90" max="90" required>
                                            <div class="error-message" data-for="lat0" data-lang="lat0">須介於 -90 到 90 的數字。</div>
                                        </div>
                                        <div class="form-input">
                                            <label for="lat1" data-lang="end_lat">結束緯度</label>
                                            <input type="number" id="lat1" min="-90" max="90">
                                            <div class="error-message" data-for="lat1" data-lang="lat1">須介於 -90 到 90 的數字，或空白。</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="select-list">
                                    <p data-lang="mutlple">選擇下載資料（可多選）</p>
                                    <label class="material-checkbox">
                                        <input type="checkbox" value="sst">
                                        <span class="checkmark"></span>
                                        Monthly mean SST（每月海表平均溫度）
                                    </label>
                                    <label class="material-checkbox">
                                        <input type="checkbox" value="sst_anomaly">
                                        <span class="checkmark"></span>
                                        Monthly SST Anomalies（每月海表溫度異常值）
                                    </label>
                                    <label class="material-checkbox">
                                        <input type="checkbox" value="level">
                                        <span class="checkmark"></span>
                                        Monthly MHW levels（每月海洋熱浪級數）
                                    </label>
                                    <label class="material-checkbox">
                                        <input type="checkbox" value="td">
                                        <span class="checkmark"></span>
                                        Themal Displacements（每月熱位移）
                                    </label>

                                </div>


                                <div class="query">
                                    <button id="downloadbtn">Download</button>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>
        <footer id="footer" class="footer">
            <div class="footer-top">
                <div class="footer-container">
                    <div class="footer-info">
                        <h3>ODB<br>
                            <span>Marine Heatwaves</span>
                        </h3>
                        <p data-lang="info">
                            國立臺灣大學海洋研究所 <br>
                            10617 臺北市大安區羅斯福路四段一號<br><br>
                            Phone: +886-2-2363-6450#117<br>
                            Email: cyweng24@ntu.edu.tw, yehtc@ntu.edu.tw<br>
                        </p>
                    </div>
                </div>
            </div>
            <div class="copywright">
                <p>Copyright &copy;2023 海洋學門資料庫-Ocean Data Bank (ODB). All Rights Reserved</p>
            </div>
        </footer>
        <script type="module">
            import {api} from './api.js'
            console.log(api)
            const sections = document.querySelectorAll("section");
            const navLinks = document.querySelectorAll("nav a");
            const resetLinks = () => {
                navLinks.forEach((link) => link.classList.remove("active"));
            };

            const handleScroll = () => {
                const { pageYOffset } = window;
                sections.forEach((section) => {
                    const { id, offsetTop, clientHeight } = section;
                    const offset = offsetTop -1 ;
                    if (pageYOffset >= offset && pageYOffset < offset + clientHeight) {
                        resetLinks();
                        navLinks.forEach((link) => {
                            if (link.dataset.scroll === id) {
                                link.classList.add("active");
                            }
                        });
                    }
                });
            };

            document.addEventListener("scroll", handleScroll);
            //menu
            const toggleMenu = () => document.body.classList.toggle("open");
            //reference list
            function toggleDropdown() {
                const rfElement = document.getElementById("rf");
                const chevron = document.getElementById("chevron");

                if (rfElement.classList.contains("active_rf")) {
                    rfElement.classList.remove("active_rf");
                } else {
                    rfElement.classList.add("active_rf");
                }
                chevron.innerHTML = !rfElement.classList.contains("active_rf")
                    ? "expand_more"
                    : "close";
            }

            // show alert
            function showAlert(message) {
                const alertBox = document.createElement('div');
                alertBox.style.position = 'fixed';
                alertBox.style.top = '50%';
                alertBox.style.left = '50%';
                alertBox.style.transform = 'translate(-50%, -50%)';
                alertBox.style.padding = '48px 40px';
                alertBox.style.paddingBottom = '70px';
                alertBox.style.backgroundColor = '#252328';
                alertBox.style.borderRadius = '8px';
                alertBox.style.color = 'rgba(255, 255, 255, 0.84)';
                alertBox.style.border = 'solid 1px #E74C3C';
                alertBox.style.zIndex = 1000;
                alertBox.innerText = message;


                const closeButton = document.createElement('button');
                closeButton.style.position = 'fixed';
                closeButton.innerText = 'Close';
                closeButton.style.width = '80px';
                closeButton.style.height = '30px';
                closeButton.style.backgroundColor = '#E74C3C';
                closeButton.style.color = '#FFF';
                closeButton.style.border = 'none';
                closeButton.style.fontFamily = 'Poppins';
                closeButton.style.borderRadius = '4px';
                closeButton.style.cursor = 'pointer';
                closeButton.style.position = 'absolute';
                closeButton.style.bottom = '20px';
                closeButton.style.right = '40px'; 

                closeButton.onmouseover = function () {
                    this.style.backgroundColor = '#C0392B';
                };
                closeButton.onmouseout = function () {
                    this.style.backgroundColor = '#E74C3C';
                };
                closeButton.onclick = function () {
                    document.body.removeChild(alertBox);
                };
                closeButton.onclick = function () {
                    document.body.removeChild(alertBox);
                };
                alertBox.appendChild(closeButton);

                document.body.appendChild(alertBox);
            }
            // Set default date values
            let startDate = document.querySelector('#startDate');
            let endDate = document.querySelector('#endDate');
            let now = new Date();
            endDate.valueAsDate = now;
            now.setMonth(now.getMonth() - 1);
            now.setDate(1);
            startDate.valueAsDate = now;

            document.getElementById('downloadbtn').addEventListener('click', async function () {


                const lon0 = document.querySelector('#lon0').value;
                const lon1 = document.querySelector('#lon1').value;
                const lat0 = document.querySelector('#lat0').value;
                const lat1 = document.querySelector('#lat1').value;
                const start = document.querySelector('#startDate').value;
                const end = document.querySelector('#endDate').value;
                let allValid = true;
                const lon0_valid = document.querySelector('#lon0');
                if (!lon0_valid.validity.valid) {
                    document.querySelector('[data-for="lon0"]').style.visibility = 'visible';
                    allValid = false;
                }else{
                    document.querySelector('[data-for="lon0"]').style.visibility = 'hidden';
                }
                const lon1_valid = document.querySelector('#lon1');
                if (!lon1_valid.validity.valid) {
                    document.querySelector('[data-for="lon1"]').style.visibility = 'visible';
                    allValid = false;
                }else{
                    document.querySelector('[data-for="lon1"]').style.visibility = 'hidden';
                }
                const lat0_valid = document.querySelector('#lat0');
                if (!lat0_valid.validity.valid) {
                    document.querySelector('[data-for="lat0"]').style.visibility = 'visible';
                    allValid = false;
                }else{
                    document.querySelector('[data-for="lat0"]').style.visibility = 'hidden';
                }
                const lat1_valid = document.querySelector('#lat1');
                if (!lat1_valid.validity.valid) {
                    document.querySelector('[data-for="lat1"]').style.visibility = 'visible';
                    allValid = false;
                }else{
                    document.querySelector('[data-for="lat1"]').style.visibility = 'hidden';
                }
                if (!allValid) {
                    event.preventDefault(); // Prevent form submission or any other default action.
                    return;
                }
                const checkboxes = document.querySelectorAll('.select-list input[type="checkbox"]');
                const dataVariables = Array.from(checkboxes).filter(chk => chk.checked).map(chk => chk.value);
                const url = `https://eco.odb.ntu.edu.tw/api/mhw/csv?lon0=${lon0}&lat0=${lat0}${lon1 ? '&lon1=' + lon1 : ''}${lat1 ? '&lat1=' + lat1 : ''}${start ? '&start=' + start : ''}${end ? '&end=' + end : ''}${dataVariables.length > 0 ? '&append=' + dataVariables.join(',') : ''}`;

                //const response = await fetch(url);
                try {
                    const response = await fetch(url);
                    const blob = await response.blob();
                    const downloadUrl = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = downloadUrl;
                    a.download = 'data.csv';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                } catch (error) {
                    showAlert("伺服器錯誤，請稍待重試或與技術員聯絡。There was a network error. Please try again later.");
                }

            });
            const languageSwitch = document.querySelector('#language-toggle');
            languageSwitch.addEventListener('change', function () {
                const currentLang = languageSwitch.checked ? 'en' : 'zh';
                switchLanguage(currentLang);
            });

            const translations = {
                en: {
                    home_subtitle: `ODB provides the open data of marine heatwave levels, as well as monthly mean sea surface temperature (SST), SST anomalies, and thermal displacement caused by marine heatwaves at a 0.25° x 0.25° global resolution.`,
                    about_text: `Global warming and the ensuing climate crisis have led to an ongoing rise in Earth's temperatures. 
                                Unusually high temperatures during heatwaves can be deadly on land, and the oceans are equally vulnerable to this threat. 
                                When seawater remains abnormally warm for an extended period compared to historical average temperatures, 
                                it's referred to as 'marine heatwaves' (MHWs) (<a href="https://www.fish.wa.gov.au/documents/research_reports/frr222.pdf">Pearce et al., 2011</a>; <a href="https://www.sciencedirect.com/science/article/pii/S0079661116000057">Hobday et al., 2016</a>). The MHWs can cover vast areas, spanning thousands of square kilometers and lasting for weeks or even months (<a href="https://www.nature.com/articles/nclimate3082">Di Lorenzo and Mantua, 2016</a>). 
                                Such prolonged warming events significantly affect marine life, ecosystems, and fisheries. 
                                To raise general awareness about MHWs, ODB provides MHWs' open data that is compiled from <a href="https://www.ncei.noaa.gov/products/optimum-interpolation-sst">NOAA's OISST</a> data at a 0.25° x 0.25° resolution. 
                                Following <a href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et al.'s (2020)</a> approach, ODB evaluates MHW occurrences for each month from 1982 to the present, covering approximately 40 years (for more details, refer to the 'Method' section). 
                                The severity of MHWs is classified into distinct levels according to the criteria defined by <a href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday et al.'s (2018)</a>. 
                                These categorized MHW levels, as well as the monthly mean SST, SST anomalies, and thermal displacements* caused by MHWs, collectively constitute our comprehensive global database. 
                                The datasets will receive monthly updates and are available for download. 
                                Furthermore, we provide access to <a href="https://ecodata.odb.ntu.edu.tw/geoserver/marineheatwave/wms?service=WMS&request=GetCapabilities">WMS</a> and <a 
                                href="https://ecodata.odb.ntu.edu.tw/geoserver/gwc/service/wmts/?service=WMTS&request=getCapabilities">WMTS</a> layers for MHWs (see hyperlinks), 
                                and the <a href="https://ecodata.odb.ntu.edu.tw/geoserver/
                                marineheatwave/wms">instruction</a> for application on QGIS.<br><br>

                                According to the <a href="https://doi.org/10.1017/9781009325844">2022 Intergovernmental Panel on Climate Change (IPCC) report</a>,
                                 the frequency, intensity, and duration of global MHWs have increased and will continue to rise into the future. 
                                 Given the increasingly frequency and occurrence of MHWs (<a href="https://www.nature.com/articles/s41586-018-0383-9">Frölicher et al. 2018</a>; <a href="https://www.nature.com/articles/s41467-018-03732-9">Oliver et al., 2018</a>), 
                                 ODB aims to support research on the spatiotemporal variations of MHWs, their potential impact on marine life and provide a reference for predicting and responding to MHWs.<br><br>
                    
                                * Thermal Displacement: In the context of MHW, 'thermal displacement' refers to the minimum distance required to follow the long-term average sea surface temperature (<a href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et al., 2020</a>). 
                                Specifically, thermal displacement signifies the range over which marine heatwaves influence surrounding marine ecosystems, 
                                particularly concerning the movement, distribution range, and ecosystem function of marine organisms.`,
                    fig1_text: `Marine heatwaves are classified according to <a href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday et al., 2018</a>. Monthly SST anomalies fall into four levels: below twice the threshold, two to three times the threshold, three to four times the threshold, 
                                and above four times the threshold. These levels are labeled as Moderate, Strong, Severe, and Extreme, respectively. Figure adapted from <a href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday et al. (2018)</a>.`,
                    fig2_text: `June 2023 global data on (a) marine heatwave levels and (b) thermal displacements induced by marine heatwaves.`,
                    method_title: `ODB Marine Heatwave Definition and Calculation Method`,
                    step_a: `Using NOAA OISST v2.1 dataset, calculate the monthly mean SST from 1982 to the present.`,
                    step_b: `Calculate monthly SST anomalies :<br/>Monthly mean SST (from Step A) - Long-term monthly mean SST (from 1982-2011).`,
                    step_c: `Based on the SST anomalies, define the marine heatwave threshold values by Step C-1.`,
                    step_c_1: `The threshold for marine heatwave occurrence: The monthly SST anomalies (as in Step B) must exceed the 90th percentile of the seasonal background value*.<br>
                    *Seasonal background value: Incorporate the month prior and subsequent to the calculated month as the background. For example, to set the threshold for marine heatwaves in February, consider the combined 90th percentile of SST anomalies for January, February, and March (<a href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et al., 2020<a>).`,
                    step_d: `By Step B and Step C, get the SST anomalies and determine the occurrence of marine heatwaves. If a marine heatwave occurred, evaluate the thermal displacement caused by the marine heatwave.`,
                    download_note: `Important Notes`,
                    download1: `The downloaded file will be in .csv format.`,
                    download2: `Longitude range: -180° ~ 180°, Latitude range: -90° ~ 90°, Time range: 1982-Jan-01 to the previous month.`,
                    download3: `Output data columns: lon (longitude), lat (latitude), date (date format: yyyy-mm-dd, e.g., 2023-06-01 represents data for June 2023), sst (monthly mean sea surface temperature, °C), 
                                sst_anomaly (monthly sea surface temperature anomaly, °C), level (monthly marine heatwave level), td (monthly thermal displacement, km).`,
                    download4: `For downloading single-point data with no time constraints, please input the starting longitude, starting latitude, and time period.`,
                    download5: `For downloading regional data, if the region's dimensions are ≤ 90° x 90°, the maximum time range is one year. Please input the longitude range, latitude range, and time period.`,
                    download6: `For downloading regional data, if the region's dimensions are > 90° x 90°, the maximum time range is one month. Please input the longitude range, latitude range, and time period.`,
                    download7: `If you utilize data provided by ODB, please cite as: Ocean Data Bank, National Science and Technology Council, Taiwan. https://doi.org/10.5281/zenodo.7512112. Accessed DAY/MONTH/YEAR from www.odb.ntu.edu.tw.`,
                    start_time: `Start Time`,
                    end_time: `End Time`,
                    start_lon: `Start Longitude`,
                    end_lon: `End Longitude`,
                    start_lat: `Start Latitude `,
                    end_lat: `End Latitude `,
                    lon0:`Please enter a number between -180 and 180.`,
                    lon1:`Please enter a number between -180 and 180, or leave it empty.`,
                    lat0:`Please enter a number between -90 and 90.`,
                    lat1:`Please enter a number between -90 and 90, or leave it empty.`,
                    mutlple: "Data Download (multiple)",
                    info: `Institute of Oceanography, NTU<br>
                    No.1, Sec. 4, Roosevelt Road<br>
                    Taipei 106 ,Taiwan<br><br>
                    
                    Phone: +886-2-2363-6450#117<br>
                    Email: cyweng24@ntu.edu.tw, yehtc@ntu.edu.tw<br>`


                },
                zh: {
                    home_subtitle: 'ODB 提供全球 0.25° x 0.25° 每月的海表平均溫度、海表溫度異常值、海洋熱浪級數與海洋熱浪引起的熱位移 (Thermal displacement) 之資料下載。',
                    about_text: `全球暖化造成的氣候危機導致地球持續升溫，陸地上的異常高溫熱浪帶來致命的威脅，而海洋也面臨相同狀況。在同一地點，
                                若海水溫度相對與過去平均海洋溫度出現一段時間的異常高溫，這種現象被稱為海洋熱浪 (marine heatwaves, MHWs)
                                (<a href="https://www.fish.wa.gov.au/documents/research_reports/frr222.pdf">Pearce et al.,
                                    2011</a>; <a
                                    href="https://www.sciencedirect.com/science/article/pii/S0079661116000057">Hobday et
                                    al., 2016</a>)。
                                海洋熱浪的範圍可以延伸至數千平方公里，持續數周甚至數月 (<a href="https://www.nature.com/articles/nclimate3082">Di
                                    Lorenzo and Mantua, 2016</a>)，而這種長時間異常高溫的環境對於海洋生物、海洋生態系統和漁業資源都造成極大的影響。
                                為了提升民眾對海洋熱浪的認識， ODB 使用 <a
                                    href="https://www.ncei.noaa.gov/products/optimum-interpolation-sst">NOAA OISST</a>（Optimum Interpolation Sea
                                Surface Temperature 海表溫度）0.25° x 0.25° 的資料，
                                並依 <a href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et
                                    al. (2020)</a> 的方法，計算了全球 1982 年至今約 40 年間每個月的海洋熱浪事件（詳見 Method），
                                同時，我們依據 <a
                                    href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday
                                    et al. (2018)</a> 的分級標準，將海洋熱浪分級，
                                建立了一個全球海洋熱浪資料庫。此資料庫內容包含：每月的海表平均溫度、海表溫度異常值、海洋熱浪級數與海洋熱浪引起的熱位移*。
                                該資料將每月進行更新，並開放資料下載。同時，我們也開放 <a
                                    href="https://ecodata.odb.ntu.edu.tw/geoserver/marineheatwave/wms?service=WMS&request=GetCapabilities">WMS</a>
                                與 <a href="https://ecodata.odb.ntu.edu.tw/geoserver/gwc/service/wmts/?service=WMTS&request=getCapabilities">WMTS</a> 圖層（介接網址如超連結），
                                歡迎各界介接（若使用 QGIS 介接，可參考<a href="https://ecodata.odb.ntu.edu.tw/geoserver/
                                marineheatwave/wms">此網頁</a>）。<br /><br />
                                
                                根據 <a href="https://doi.org/10.1017/9781009325844">2022 年的《政府間氣候變化專門委員會》(IPCC) 報告</a>，未來全球海洋熱浪事件不僅頻率將增加，強度與持續時間也將上升。
                                面對愈來愈頻繁發生的海洋熱浪 (<a href="https://www.nature.com/articles/s41586-018-0383-9">Frölicher et al. 2018</a>; <a href="https://www.nature.com/articles/s41467-018-03732-9">Oliver et al., 2018</a>) ，
                                ODB 希望透過建立海洋熱浪資料庫提升使用者對海洋熱浪的認知與意識，進一步協助學界研究海洋熱浪時空分布和變化趨勢以及對海洋生物的可能影響，同時也為預測和應對海洋熱浪提供科學數據參考。<br/><br />
                                
                                * Thermal Displacement: 熱位移就是在海洋熱浪的影響下，為了追隨長期平均海表溫度所需移動的最小距離 (<a
                                    href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et al., 2020</a>)。
                                熱位移在本篇文獻中特指海洋熱浪對周圍海洋生態系統的影響範圍，特別是對海洋生物遷移、分布範圍和生態系統功能的影響。`,
                    fig1_text: `海洋熱浪分級標準，依據 <a href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday et al., 2018</a> 分級方法，每月 SST 異常值超過門檻值 2 倍以下、2 倍至 3
                                倍之間、3 倍至 4 倍之間、4倍以上，
                                其分級為 Moderate、Strong、Severe、Extreme，共四級。圖修改自 <a
                                href="https://tos.org/oceanography/article/categorizing-and-naming-marine-heatwaves">Hobday
                                et al. (2018)。</a>`,
                    fig2_text: `本資料庫 2023 年六月全球 (a) 海洋熱浪分級、(b) 海洋熱浪引起的熱位移。`,
                    method_title: `ODB 海洋熱浪計算方法與定義`,
                    step_a: `使用 NOAA OISST 0.25° x 0.25° 的 v2.1 資料集，計算 1982 至今每月平均 SST。`,
                    step_b: `計算每月 SST 異常值：<br />每月平均 SST (Step A) - 各月 SST 長期平均值 (1982-2011)。`,
                    step_c: `將計算出的異常值，根據 Step C-1 的方法定義海洋熱浪門檻值。`,
                    step_c_1: `每月 SST 異常值（算法如 Step B）至少高於季節背景值*的第 90 個百分位數。<br />
                                *季節背景值：將計算月份的前後一個月納入當作背景值，例如定義 2 月份海洋熱浪的門檻值，即為綜合過去 1、2、3 月全部每月 SST 異常值的第 90
                                個百分位數。(<a href="https://www.nature.com/articles/s41586-020-2534-z">Jacox et al., 2020</a>)`,
                    step_d: `比較 Step B 與 Step C 即得知海洋熱浪發生與否及 SST 異常值。<br />若有熱浪，找出海洋熱浪引起的熱位移。`,
                    download_note: `注意事項`,
                    download1: `下載之檔案為 .csv`,
                    download2: `經度範圍：-180&deg; ~ 180&deg;，緯度範圍：-90&deg; ~ 90&deg;，時間範圍：1982-Jan-01 ~ 上個月。`,
                    download3: `資料輸出欄位：lon（經度）、lat（緯度）、date（日期，yyyy-mm-dd，ex. 2023-06-01 等同 2023 六月份資料）、
                                sst（每月海表平均溫度，&deg;C）、sst_anomaly（每月海表溫度異常值，&deg;C）、level（每月海洋熱浪級數）、td（每月熱位移，km）。`,
                    download4: `下載單點資料，無時間限制，請輸入起始經度、起始緯度和時間區段。`,
                    download5: `下載區域資料，若區域範圍 &le; 90&deg; x 90&deg;，時間區段最長只能一年，請輸入經度、緯度範圍和時間區段。`,
                    download6: `下載區域資料，若區域範圍 &gt; 90&deg; x 90&deg;，時間區段最長只能一個月，請輸入經度、緯度範圍和時間區段。`,
                    download7: `若您使用 ODB 提供的資料，引用格式如: Ocean Data Bank, National Science and Technology Council,
                                Taiwan. https://doi.org/10.5281/zenodo.7512112. Accessed DAY/MONTH/YEAR from
                                www.odb.ntu.edu.tw.`,
                    start_time: `開始時間`,
                    end_time: `結束時間`,
                    start_lon: `起始經度`,
                    end_lon: `結束經度`,
                    start_lat: `起始緯度`,
                    end_lat: `結束緯度`,
                    lon0:`須為介於 -180 到 180 的數字。`,
                    lon1:`須為介於 -180 到 180 的數字，或空白。`,
                    lat0:`須為介於 -90 到 90 的數字。`,
                    lat1:`須為介於 -90 到 90 的數字，或空白。`,
                    mutlple: "選擇下載資料（可多選）",
                    info: ` 國立臺灣大學海洋研究所 <br>
                    10617 臺北市大安區羅斯福路四段一號<br><br>
                    Phone: +886-2-2363-6450#117<br>
                    Email: cyweng24@ntu.edu.tw, yehtc@ntu.edu.tw<br>`
                }
            };
            function switchLanguage(lang) {
                const elementsToTranslate = document.querySelectorAll('[data-lang]');
                elementsToTranslate.forEach(element => {
                    const translationKey = element.getAttribute('data-lang');
                    element.innerHTML = translations[lang][translationKey];
                });
            }
        </script>
    </body>

</html>
</li>